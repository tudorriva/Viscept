digraph microservices_architecture {
  rankdir=LR;
  bgcolor=transparent;
  
  node [shape=box, style="filled,rounded", fillcolor=lightblue, fontname=Arial];
  
  Client [label="ðŸ‘¤ Client", fillcolor=lightyellow];
  Gateway [label="ðŸšª API Gateway", fillcolor=lightgreen];
  
  node [fillcolor=lightcyan];
  Auth [label="ðŸ” Auth Service"];
  User [label="ðŸ‘¥ User Service"];
  Product [label="ðŸ“¦ Product Service"];
  Order [label="ðŸ“‹ Order Service"];
  Payment [label="ðŸ’³ Payment Service"];
  
  node [shape=cylinder, fillcolor=lightpink];
  UserDB [label="ðŸ“Š User DB"];
  ProductDB [label="ðŸ“Š Product DB"];
  OrderDB [label="ðŸ“Š Order DB"];
  Cache [label="âš¡ Cache\n(Redis)"];
  
  Client -> Gateway [label="HTTPS"];
  
  Gateway -> Auth [label="authenticate"];
  Gateway -> User [label="get_user"];
  Gateway -> Product [label="list_products"];
  Gateway -> Order [label="create_order"];
  
  User -> UserDB [label="query"];
  Product -> ProductDB [label="query"];
  Order -> OrderDB [label="write"];
  Order -> Payment [label="process"];
  
  Auth -> Cache [label="session"];
  Product -> Cache [label="cache"];
  
  {rank=same; Auth; User; Product; Order; Payment;}
  {rank=same; UserDB; ProductDB; OrderDB; Cache;}
}
